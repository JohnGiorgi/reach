#########
# Modification triggers
#########


- name: modification_trigger_1
  label: [ModificationTrigger]
  priority: 1
  type: token
  pattern: |
    # a passive verb without a subject with a lemma form ending in ylate.  Trigger cannot be negative...
    [!lemma=/^have$/ & !tag="MD"]? [!lemma=/^un|de/ & lemma=/(?i)phosphorylat|ubiquitinat|acetylat|farnesylat|glycosylat|hydroxylat|methylat|ribosylat|sumoylat/ & !outgoing=/prep_by|agent/ & tag=/VBN/ & !outgoing=/nsub/ & !incoming=/conj/]
    | # a modifier of the specified pattern
    [!lemma=/^un|de/ & lemma=/(?i)phosphorylat|ubiquitinat|acetylat|farnesylat|glycosylat|hydroxylat|methylat|ribosylat|sumoylat/ & !outgoing=/prep_by|agent/ & tag="JJ"]
    |
    (^[!lemma=/^un|de/ & lemma=/(?i)phosphorylat|ubiquitinat|acetylat|farnesylat|glycosylat|hydroxylat|methylat|ribosylat|sumoylat/ & !outgoing=/prep_by|agent/ & tag=/^NN/])
# could be made more compact with something like lemma=/ylated?$/

# Phosphorylated p53 on serine-15
#########
# Modification rules
#########

- name: modification_1
  label: [PTM, Modification, BioChemicalEntity]
  action: mkModification
  priority: 2
  type: token
  pattern: |
    @mod:ModificationTrigger @entity:BioChemicalEntity ([tag=/^N/ & !mention=/./]*? [tag=IN] @site:Site)?


- name: domain_of_protein
  label: [EventSite, Modification, BioChemicalEntity]
  action: storeEventSite
  priority: 2
  type: token
  pattern: |
    @site:Site "of" @entity:BioChemicalEntity


